networks:
  proxy6:
    external: true

services:
  chemotion-cms:
    image: mekkyz/chemotion-cms:3.91
    container_name: chemotion-cms
    restart: unless-stopped
    networks:
      - proxy6
    ports:
      - '8180:1337'
    environment:
      - NODE_ENV=production
      - DATABASE_CLIENT=sqlite
      - HOST=0.0.0.0
    labels:
      - 'traefik.enable=true'
      - 'traefik.docker.network=proxy6'
      - 'traefik.http.routers.chemotion-cms.rule=Host(`cms.web123.chemotion.scc.kit.edu`)'
      - 'traefik.http.routers.chemotion-cms.entrypoints=websecure'

  chemotion-web:
    image: mekkyz/chemotion-web:4.5
    container_name: chemotion-web
    restart: unless-stopped
    networks:
      - proxy6
    ports:
      - '8280:3000'
    labels:
      - 'traefik.enable=true'
      - 'traefik.docker.network=proxy6'
      - 'traefik.http.routers.chemotion-web.rule=Host(`web123.chemotion.scc.kit.edu`)'
      - 'traefik.http.routers.chemotion-web.entrypoints=websecure'

  chemotion-saurus:
    image: nginx:alpine
    container_name: chemotion-saurus
    restart: unless-stopped
    networks:
      - proxy6
    ports:
      - '8380:80'
    volumes:
      - ./saurus/build3:/usr/share/nginx/html:ro
      - ./saurus/default.conf:/etc/nginx/conf.d/default.conf:ro
    labels:
      - 'traefik.enable=true'
      - 'traefik.docker.network=proxy6'
      - 'traefik.http.routers.chemotion-saurus.rule=Host(`docs.web123.chemotion.scc.kit.edu`)'
      - 'traefik.http.routers.chemotion-saurus.entrypoints=websecure'
